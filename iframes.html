<!doctype html>
<html lang="en">
<head>
<title>iframes</title>
<meta charset="utf-8">
<style> * { font-family: arial, sans-serif;
font-size: 13px;
line-height: 17px; }ul.indent { list-style-type: none; }ol { list-style-type: decimal; }ol ol { list-style-type: lower-latin; }ol ol ol { list-style-type: lower-roman; }ol ol ol ol { list-style-type: decimal; }ol ol ol ol ol { list-style-type: lower-latin; }ol ol ol ol ol ol{ list-style-type: lower-roman; }ol ol ol ol ol ol ol { list-style-type: decimal; }ol  ol ol ol ol ol ol ol{ list-style-type: lower-latin; }</style>
</head>
<body>There&#x27;s been a strong push in the P2PU community to allow users to use arbitrary &lt;iframe&#x2F;&gt; elements in groups<br><br><br><strong>Benefits (Why are we talking about this?)</strong><br><br><ul class="bullet"><li>Flexibility of embedding anything into p2pu.</li><li>There are great tools out there to support social learning. We will never build all those tools into P2PU, but we encourage everyone to make full use of them - and this is a way to make that easier.</li><li>Some of our partners have existing tools that would let us expand the functionality available to our users. Embedding these tools into our site will make the experience more seamless.</li></ul><br>But there are lots of security risks (see below for a full list). We want to allow more people to add great features.<br><br><br><strong>Suggested Solution</strong><br><br><ul class="bullet"><li>Don&#x27;t let people embed arbitrary JavaScript. Offer a workaround for iframes, some trusted users can embed.</li><li>iFrames pass information back and forth. We will be sending messages to another website and they will send us messages. (We need to API)</li><li>Create a trusted account for people we trust to do this</li><li>This would require development work to standardize the communication between P2PU and an embedded iframe.</li><li>We plan to build this step by step, taking into account the use-cases that have most benefit to our users, and depending on developiment resources.</li><li><strong>Here is how you can get involved &#x2F; help us &#x2F; get started</strong></li></ul><br><br><br><strong>Security Issues</strong><br><br><strong>1) Phishing</strong><br><br>If any registered user can inject content in a page using an iframe, they can pretty effectively phish a website visitor. Imagine the&nbsp; attacker creates a page with an iframe that points to <a href="http&#x3a;&#x2F;&#x2F;evil&#x2e;example&#x2e;com&#x2F;mypage&#x2e;html">http:&#x2F;&#x2F;evil.example.com&#x2F;mypage.html</a>&nbsp; (a URL that they control). The iframe displays content with a form requesting personally identifiable information, or even worse, credit card information. An unwitting user may fill out the form thinking they were submitting the information to P2PU (an entity they trust) when in fact it is going to <a href="http&#x3a;&#x2F;&#x2F;evil&#x2e;example&#x2e;com&#x2F;mypage&#x2e;html">http:&#x2F;&#x2F;evil.example.com&#x2F;mypage.html</a>.<br><br><strong>2) URL Redirection</strong><br><br>This can range from annoying to dangerous as it could also be used as part of a phishing scam. Imagine now that <a href="http&#x3a;&#x2F;&#x2F;evil&#x2e;example&#x2e;com&#x2F;mypage&#x2e;html">http:&#x2F;&#x2F;evil.example.com&#x2F;mypage.html</a> contains the following snippet of Javascript:<br><br>&lt;script type=&quot;text&#x2F;javascript&quot;&gt;<br>&nbsp;&nbsp;&nbsp; parent.window.location = &#x27;<a href="http&#x3a;&#x2F;&#x2F;p2puu&#x2e;org&#x2F;en&#x2d;US&#x2F;course&#x2d;home">http:&#x2F;&#x2F;p2puu.org&#x2F;en-US&#x2F;course-home</a>&#x27;;<br>&lt;&#x2F;script&gt;<br><br>Where p2puu.org is a domain controlled by the attacker. The page could be dressed to look exactly like a page on p2pu.org&nbsp; and again, the user can be phished for information, thinking they were&nbsp; providing it to P2PU (e.g. imagine some faked campaign advertising benefits of paid memberships to P2PU).<br><br>The annoying case is simply redirecting them to some other site for either a prank (e.g. a porn site) or some ill fated attempt at generating ad revenue. Oh, they could also display ads on our site :)&nbsp;<br><br><strong>3)</strong> <strong>Using an iFrame to exploit existing vulnerabilities</strong><br><br>Certain sites should never be loaded in an iframe, as an attacker could use clickjacking to trick a user into performing some dangerous operation&nbsp; (usually some kind of user authorization or unwitting posting of&nbsp; content). Popular examples are Facebook and Twitter worms. To get around&nbsp; this, most sites send X-Frame-Options headers that prevent them from&nbsp; being loaded in iframes in modern browsers or&nbsp; they use frame busting javascript. Unfortunately not everyone gets this&nbsp; right... case in point, Adobe still have a vulnerability in Flash that&nbsp; will allow an attacker to activate a website visitors if they can&nbsp; clickjack the user. Check it out:<br><br><a href="http&#x3a;&#x2F;&#x2F;www&#x2e;feross&#x2e;org&#x2F;webcam&#x2d;spy&#x2F;">http:&#x2F;&#x2F;www.feross.org&#x2F;webcam-spy&#x2F;</a><br>&nbsp;<br><strong>4) Cross Frame Scripting</strong><br><br>There are a number&nbsp; of data theft scenarios, especially on older browsers. I believe P2PU&nbsp; uses HttpOnly cookies, but some older browsers could still be&nbsp; compromised. More details here:<br><br><a href="https&#x3a;&#x2F;&#x2F;www&#x2e;owasp&#x2e;org&#x2F;index&#x2e;php&#x2F;Cross&#x5f;Frame&#x5f;Scripting">https:&#x2F;&#x2F;www.owasp.org&#x2F;index.php&#x2F;Cross_Frame_Scripting</a><br><br>Notice that a lot of the attack scenarios described in that link rely on an attacker exploiting an XSS vulnerability to inject an iframe on a compromised site... you&#x27;d basically be allowing registered users to skip&nbsp; that step.<br><br><strong>5) Message sending between iframe and parent</strong>\<br><br>An iframe on a page could&nbsp; send messages to the parent. It is important to make sure to properly&nbsp; filter on event.origin as documented at <a href="https&#x3a;&#x2F;&#x2F;developer&#x2e;mozilla&#x2e;org&#x2F;en&#x2F;DOM&#x2F;window&#x2e;postMessage">https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en&#x2F;DOM&#x2F;window.postMessage</a><br><br><strong>6) Third Party Tracking</strong><br><br>A user visiting a page that contains an iFrame will automatically send a request to the domain specified within the iFrame. This request to the third party domain will contain the parent page within the referrer header and also any established cookies that the user has with the third&nbsp; party domain. As a result, a third party domain can track a users activity across any website where the iFrame has been placed.<br><br></body>
</html>
