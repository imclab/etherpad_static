<!doctype html>
<html lang="en">
<head>
<title>7SL6Bk6SNe</title>
<meta charset="utf-8">
<style> * { font-family: arial, sans-serif;
font-size: 13px;
line-height: 17px; }ul.indent { list-style-type: none; }ol { list-style-type: decimal; }ol ol { list-style-type: lower-latin; }ol ol ol { list-style-type: lower-roman; }ol ol ol ol { list-style-type: decimal; }ol ol ol ol ol { list-style-type: lower-latin; }ol ol ol ol ol ol{ list-style-type: lower-roman; }ol ol ol ol ol ol ol { list-style-type: decimal; }ol  ol ol ol ol ol ol ol{ list-style-type: lower-latin; }</style>
</head>
<body>To make the change from Drupal to Lernanta we will need to migrate the existing user accounts at p2pu.org. To facilitate this process we are trying to decide between:<br><br>1) Moving existing Drupal user accounts into LDAP. If the users are in LDAP it will be possible to authenticate using <a href="http&#x3a;&#x2F;&#x2F;packages&#x2e;python&#x2e;org&#x2F;django&#x2d;auth&#x2d;ldap&#x2F;">http:&#x2F;&#x2F;packages.python.org&#x2F;django-auth-ldap&#x2F;</a> for Lernanta and <a href="http&#x3a;&#x2F;&#x2F;drupal&#x2e;org&#x2F;project&#x2F;ldap&#x5f;integration">http:&#x2F;&#x2F;drupal.org&#x2F;project&#x2F;ldap_integration</a> for the drupal site.<br><br>2) Use a custom django authentication backend in Lernanta (to authenticate against the drupal site database) during the first steps of the migration, and then move all the users from one database to the other (something similar to <a href="http&#x3a;&#x2F;&#x2F;blog&#x2e;eval&#x2e;ca&#x2F;files&#x2F;migration&#x2e;py&#x29;">http:&#x2F;&#x2F;blog.eval.ca&#x2F;files&#x2F;migration.py)</a> when we stop to use the drupal site. -- See <a href="http&#x3a;&#x2F;&#x2F;docs&#x2e;djangoproject&#x2e;com&#x2F;en&#x2F;dev&#x2F;topics&#x2F;auth&#x2F;&#x23;writing&#x2d;an&#x2d;authentication&#x2d;backend">http:&#x2F;&#x2F;docs.djangoproject.com&#x2F;en&#x2F;dev&#x2F;topics&#x2F;auth&#x2F;#writing-an-authentication-backend</a> for how to implement a custom django authentication backend.<br><br>3) Use Drupal as an OpenID Server. Drupal sites themselves can act as OpenID servers, using the openid_server module, but only drupal 4.7 has support for this right now (needs to be ported to 5 and 6).<br><br>1)<br>For<br><ul class="bullet"><li>Already available solutions</li><li>LDAP will make it easier to integrate across a number of services (OSQA, wiki, BigBlueButton, Tracking software, mailing lists)</li></ul>Against<br><ul class="bullet"><li>LDAP has a huge learning curve</li><li>LDAP isn&#x27;t easy to implement</li></ul><br>2)<br>For<br><ul class="bullet"><li>Simpler setup</li><li>Django backend makes doing this easily.&nbsp; Paul has already done migrations with ~12K users this way</li></ul>Against<br><ul class="bullet"><li>We&#x27;d have to write our own custom backend</li><li>In the long-term, we need integration with a number of different services (potentially IRC, Big Blue Button, OSQA, a wiki, etc)</li></ul><br>3)<br>For<br><ul class="bullet"><li><br></li></ul>Against<br><ul class="bullet"><li>Only Drupal 4.7 has this support right now and this would need to be ported to Drupal 5 and 6</li><li>This would also mean all authentication would come from Drupal which would be a problem since we want to move to Lernata</li></ul><br>Additional Thoughts<br><br>John - I think it might be a scary beast, but I&#x27;m totally uneducated. I&#x27;d really like to see us using OpenID.<br><br>Jessy - We clearly need a backend authentication solution, and LDAP might not be the shiniest or the easiest to configure, but it&#x27;s still definitely THE standard, and you&#x27;ll certainly have a lot of help and documentation from the many many many people who have gone before us and&#x2F;or who are currently in the same situation we are. +1<br><br>Paul - Default authentication backend in Django handles unsalted MD5 hashes just fine. Basically, when Django encounters a user with an unsalted MD5 hashed password, it authenticates them and then upgrades them automatically to whatever hashing algorithm&nbsp;<br>you choose to use going forward (SHA512 in our case). This means you can migrate Drupal users with a straight-up SQL script, which is what we ended up doing. I&#x27;d recommend doing the same thing we did... total migration took about 30 minutes for ~12k users with a ~30 line python script (<a href="http&#x3a;&#x2F;&#x2F;blog&#x2e;eval&#x2e;ca&#x2F;files&#x2F;migration&#x2e;py&#x29;">http:&#x2F;&#x2F;blog.eval.ca&#x2F;files&#x2F;migration.py)</a> that executed raw sql against the Drupal database and used Django models to write data.<br><br>Stian - This is very useful. However, this was a straight migration, for P2PU the concern currently is to enable OSQA and Drupal integration in the short term, and longer term to enable integration with a number of different services (potentially IRC, Big Blue Button, OSQA, a wiki, etc). +1<br><br>Pippa - As it currently sits, users need to create multiple user accounts to&nbsp; deal with the various systems that P2PU recommends, whether they be&nbsp; OSQA, Pivotal Tracker, UserVoice, Open Atrium (tracker.p2pu.org),&nbsp; a wiki, mailing lists, blogs etc...<br>In my mind the experience of community members (and most importantly&nbsp; course participants) is made much more difficult through that process&nbsp; of creating accounts for each individual service... The current setup is making learners lives far more difficult than they&nbsp; need to be and quite possibly multiple sign-ups and managing multiple&nbsp; accounts is one factor leading to course drop-outs.<br><br>Nigel - Comments from an experienced sysadmin - <em>LDAP has a wicked learning curve.&nbsp; On the admin side you need to make decisions about configuration and replication techniques, on the user side ldap syntax is a beast, it&#x27;s very difficult to learn.&nbsp; The basics should be ok to set up, but it still isnt simple</em><br><br></body>
</html>
